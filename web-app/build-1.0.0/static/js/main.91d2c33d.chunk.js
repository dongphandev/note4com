(this["webpackJsonpweb-app"]=this["webpackJsonpweb-app"]||[]).push([[0],{45:function(e,t,a){e.exports=a(73)},71:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"types",(function(){return m})),a.d(n,"default",(function(){return p})),a.d(n,"authenticated",(function(){return h}));var o={};a.r(o),a.d(o,"types",(function(){return y})),a.d(o,"default",(function(){return E})),a.d(o,"navigate",(function(){return v})),a.d(o,"hideNotification",(function(){return O})),a.d(o,"showNotification",(function(){return N})),a.d(o,"showLoading",(function(){return w})),a.d(o,"hideLoading",(function(){return I}));var r=a(0),c=a.n(r),l=a(23),i=a.n(l),s=a(8),u=a(11),d=a(42);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var m={AUTHENTICATED:"AUTH/AUTHENTICATED"},p=m;function h(e){var t=e.token,a=e.owner,n=e.model;return{type:m.AUTHENTICATED,payload:{token:t,owner:a,model:n}}}var f=a(1),b=a(43),g=Object(b.a)(),y={SHOW_LOADING:"UI/SHOW_LOADING",HIDE_LOADING:"UI/HIDE_LOADING",SHOW_NOTIFICATION:"UI/SHOW_NOTIFICATION",HIDE_NOTIFICATION:"UI/HIDE_NOTIFICATION"},E=y;function v(e){var t=e.to;g.push(t)}function O(){return{type:y.HIDE_NOTIFICATION,payload:{}}}function N(e){return{type:y.SHOW_NOTIFICATION,payload:{message:e}}}function w(e){return{type:y.SHOW_LOADING,payload:{target:e}}}function I(e){return{type:y.HIDE_LOADING,payload:{target:e}}}var j=a(21),C=a(19),k=a(10),T=a.n(k),A="unknown";function L(e){return console.log(e),Promise.reject({code:A,message:e.message,error:e})}T.a.defaults.timeout=6e4,T.a.interceptors.request.use((function(e){return e.headers["Content-Type"]="application/json",e}),(function(e){return L(e)})),T.a.interceptors.response.use((function(e){return console.log(e),e.data}),(function(e){return L(e)}));var U={get:function(e,t){return T.a.get(e,t)},remove:function(e,t){return T.a.delete(e,t)},post:function(e,t,a){return T.a.post(e,JSON.stringify(t),a)},put:function(e,t,a){return T.a.put(e,JSON.stringify(t),a)}},S=function(){return"/api/login"},x=function(e){return"/api/notes/".concat(e)},D=function(){return"/api/notes/search"},H=function(){return"/api/notes"},_={UI:o,Auth:n},B={LOAD:"NOTE/LOAD",SEARCH:"NOTE/SEARCH",CREATE:"NOTE/CREATE",UPDATE:"NOTE/UPDATE"},W=B;var P=a(44),F=window;function R(e){return null===e||void 0===e||0===e.length||0===Object.keys(e).length&&e.constructor===Object||"string"===typeof e&&""===e.trim()}function q(e){return!R(e)}function G(e,t){var a={},n=[];if(R(e))return{data:a,list:n};var o,r=Object(P.a)(e);try{for(r.s();!(o=r.n()).done;){var c=o.value,l=c[t];n.push(l),a[l]=c}}catch(i){r.e(i)}finally{r.f()}return{list:n,data:a}}var M=Object(u.c)({note:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{list:[],data:{}},t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload,o=e;switch(a){case W.LOAD:case W.SEARCH:return{list:(o=G(n,"id")).list,data:o.data};case W.UPDATE:return Object(f.a)(Object(f.a)({},e),{},{data:Object(f.a)(Object(f.a)({},e.data),{},Object(C.a)({},n.id,n))});case W.CREATE:return{data:Object(f.a)(Object(f.a)({},e.data),{},Object(C.a)({},n.id,n)),list:[n.id].concat(Object(j.a)(e.list))};default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{notification:{show:!1,message:""},loading:{show:!1,targets:[]}},t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload,o=e.loading.targets;switch(a){case E.SHOW_LOADING:return n.target&&o.push(n.target),Object(f.a)(Object(f.a)({},e),{},{loading:{show:!0,targets:o}});case E.HIDE_LOADING:return n.target&&(o=o.filter((function(e){return e!==n.target}))),Object(f.a)(Object(f.a)({},e),{},{loading:{show:0!==o.length,targets:o}});case E.SHOW_NOTIFICATION:return Object(f.a)(Object(f.a)({},e),{},{notification:{show:!0,message:n.message}});case E.HIDE_NOTIFICATION:return Object(f.a)(Object(f.a)({},e),{},{notification:{show:!1,message:""}});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{authenticated:!1,token:"",owner:"",model:{}},t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case p.AUTHENTICATED:return{authenticated:!0,token:n.token,owner:n.owner,model:n.model};default:return e}}}),z=a(25),J=a(3),K=a(14),$=a(15),Q=a(17),V=a(16),X=function(e){Object(Q.a)(a,e);var t=Object(V.a)(a);function a(){var e;Object(K.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleRequestClose=function(t){t.preventDefault(),e.props.hideNotification()},e}return Object($.a)(a,[{key:"componentDidUpdate",value:function(){var e=this;F.setTimeout((function(){e.props.hideNotification()}),5e3)}},{key:"render",value:function(){var e=this.props,t=e.show,a=e.message;return t?c.a.createElement("div",{style:{position:"absolute",bottom:0,right:10,zIndex:999}},c.a.createElement("div",{className:"alert alert-warning alert-dismissible fade show",role:"alert"},a,c.a.createElement("button",{type:"button",className:"close",onClick:this.handleRequestClose},c.a.createElement("span",{"aria-hidden":"true"},"\xd7")))):c.a.createElement("script",null)}}]),a}(c.a.Component),Y=Object(s.b)((function(e){return Object(f.a)({},e.ui.notification)}),{hideNotification:O})(X),Z={position:"absolute",width:"100%",height:"100%",paddingTop:50,opacity:.3,backgroundColor:"gray",zIndex:1e3},ee=function(e){Object(Q.a)(a,e);var t=Object(V.a)(a);function a(){var e;Object(K.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleRequestClose=function(){e.props.hideLoading()},e}return Object($.a)(a,[{key:"render",value:function(){return this.props.show?c.a.createElement("div",null,c.a.createElement("div",{style:Z}),c.a.createElement("div",{style:{zIndex:1001,position:"absolute",marginTop:52,marginLeft:2}},c.a.createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading...")),c.a.createElement("div",{className:"spinner-grow spinner-grow-sm",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading...")))):c.a.createElement("script",null)}}]),a}(c.a.Component),te=Object(s.b)((function(e){return Object(f.a)({},e.ui.loading)}),{hideLoading:I})(ee);a(71);var ae=function(e){return console.log(e),c.a.createElement("div",{className:"app"},c.a.createElement(Y,null),c.a.createElement(te,null),e.children)};var ne=Object(s.b)((function(e){return Object(f.a)({},e.auth)}),{})((function(e){return e.authenticated?c.a.createElement("span",{id:"auth_token",style:{display:"none"}},e.token):c.a.createElement(J.a,{to:"/login"})}));var oe=function(){return c.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},c.a.createElement("span",{className:"navbar-brand"},"Note For Comparations"))};var re=function(e){return c.a.createElement("div",{className:"universal-template"},c.a.createElement(ne,null),c.a.createElement(oe,null),e.children)},ce=a(9);var le=function(e){var t=e.style,a=void 0===t?{}:t,n=e.name,o=void 0===n?"Search":n,l=e.placeholder,i=void 0===l?"":l,s=e.onSearch,u=Object(r.useState)(""),d=Object(ce.a)(u,2),m=d[0],p=d[1];return c.a.createElement("div",{className:"input-group mb-3",style:a},c.a.createElement("input",{type:"text",className:"form-control",placeholder:i,onChange:function(e){return p(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&s(m)}}),c.a.createElement("div",{className:"input-group-append"},c.a.createElement("button",{className:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:function(e){return s(m)}},o)))},ie=function(e){var t=e.size,a=void 0===t?10:t;return c.a.createElement("div",{style:{display:"inline-block",width:a}})},se=function(e){var t=e.styles,a=void 0===t?{}:t,n=e.title,o=void 0===n?"":n,l=e.items,i=void 0===l?[]:l,s=e.onChange,u=Object(r.useState)("none"),d=Object(ce.a)(u,2),m=d[0],p=d[1],h=function(){p("none")};return c.a.createElement("div",{style:a,className:"dropdown"},c.a.createElement("button",{style:{opacity:.5},className:"btn btn-outlight dropdown-toggle",type:"button","aria-haspopup":"true","aria-expanded":"false",onClick:function(){p("block")}},o),c.a.createElement("div",{className:"dropdown-menu dropdown-menu-right",style:{display:m}},i&&i.map((function(e,t){return c.a.createElement("button",{key:t,className:"dropdown-item",type:"button",onClick:function(){h(),s(e.id)}},e.name)})),c.a.createElement("button",{className:"dropdown-item",type:"button",onClick:function(){return h()}},"Close")))},ue={blockquote:{borderLeft:"solid lightgrey 5px",paddingLeft:5,marginLeft:-10}},de=[{id:"update",name:"Edit"},{id:"delete",name:"Delete"}];var me=function(e){var t=e.model,a=(e.selected,e.onChange),n=t.note?t.note.split("\n"):[];return c.a.createElement("blockquote",{className:"blockquote mb-2",style:ue.blockquote},c.a.createElement(se,{styles:{float:"right"},items:de,onChange:function(e){a({type:e,payload:t})}}),c.a.createElement("p",null,t.key),n&&n.map((function(e,t){return""!==e.trim()&&c.a.createElement("footer",{key:t,className:"blockquote-footer"},e)})))},pe={blockquote:{borderLeft:"solid lightgrey 5px",paddingLeft:5,marginLeft:-10},textarea:{height:40}},he=function(e){var t=e.trim();if(""===t)return null;var a=t.indexOf("\n");return a<0?[t,""]:[t.substr(0,a),t.substr(a)]},fe=function(e){var t=e.model,a=e.onChange,n=Object(r.useState)(null),o=Object(ce.a)(n,2),l=o[0],i=o[1],s=Object(r.useState)(""),u=Object(ce.a)(s,2),d=u[0],m=u[1],p=null===l?null:l.key,h=function(e){var n=e.type,o=e.payload;if("update"===n){var r="".concat(o.key);r=o.note.startsWith("\n")?r.concat(o.note):r.concat("\n",o.note),i(o),m(r)}else if("delete"===n){var c=Object(f.a)(Object(f.a)({},t),{},{contents:t.contents.filter((function(e){return e.key!==o.key}))});a({type:"update",payload:c})}},b=function(){var e=he(d);if(null!==e){var n={key:e[0],note:e[1],ref:l.ref},o=Object(f.a)(Object(f.a)({},t),{},{contents:[n].concat(Object(j.a)(t.contents.filter((function(e){return e.key!==l.key}))))});a({type:"update",payload:o}),i(null),m("")}else a({type:"error",payload:{message:"Please input correct note."}})},g=function(){var e=he(d);if(null!==e){var n={key:e[0],note:e[1],ref:null},o=Object(f.a)(Object(f.a)({},t),{},{contents:[].concat(Object(j.a)(t.contents),[n])});a({type:"update",payload:o}),m("")}else a({type:"error",payload:{message:"Please input correct note."}})},y=function(){i(null),m("")};return c.a.createElement("div",{className:"card mb-3"},c.a.createElement("div",{className:"card-header ".concat("bg-light")},t.title,c.a.createElement("span",{style:{float:"right"}},c.a.createElement("button",{type:"button",className:"btn btn-sm btn-link ".concat("bg-light")},c.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-share-fill",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{fillRule:"evenodd",d:"M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"}))))),c.a.createElement("div",{className:"card-body"},t.contents&&t.contents.map((function(e,t){return c.a.createElement(me,{key:t,style:pe.blockquote,model:e,onChange:h,selected:e.key===p})}))),c.a.createElement("div",{className:"card-footer",style:{padding:0}},c.a.createElement("div",{className:"input-group"},c.a.createElement("textarea",{value:d,onChange:function(e){m(e.target.value)},style:Object(f.a)(Object(f.a)({},pe.textarea),{},{height:""!==d?120:40}),className:"form-control",row:"3"}),""===d?c.a.createElement("script",null):l?c.a.createElement("div",{className:"input-group-append"},c.a.createElement("button",{className:"btn btn-outline-primary",type:"button",onClick:b},"Save"),c.a.createElement("button",{className:"btn btn-outline-default",type:"button",onClick:y},"Cancel")):c.a.createElement("div",{className:"input-group-append"},c.a.createElement("button",{className:"btn btn-outline-primary",type:"button",onClick:g},"Add")))))};var be=function(e){var t=e.open,a=e.onChange,n=Object(r.useState)(""),o=Object(ce.a)(n,2),l=o[0],i=o[1];if(!t)return c.a.createElement("script",null);var s=function(){i(""),a({type:"close"})},u=function(){var e=l.trim();""!==e&&(s(),a({type:"create",payload:{title:e,contents:[]}}))};return c.a.createElement("div",{className:"modal",style:{display:"block"},tabIndex:"-1",role:"dialog"},c.a.createElement("div",{className:"modal-dialog",role:"document"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("h5",{className:"modal-title"},"Please give your note a short title")),c.a.createElement("div",{className:"modal-body"},c.a.createElement("input",{className:"form-control",placeholder:"Enter title",autoFocus:!0,onChange:function(e){return i(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&u()}})),c.a.createElement("div",{className:"modal-footer"},c.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:u},"Save"),c.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:s},"Cancel")))))},ge=function(e){Object(Q.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(K.a)(this,a),(n=t.call(this,e)).handleLoad=function(){var e=n.props.auth.owner;n.props.load({username:e})},n.handleSearch=function(e){var t=n.props.auth.owner;n.props.search({username:t,keyword:e})},n.handleAddBox=function(){n.setState({creatingBox:!0})},n.handleNoteChange=function(e){var t=e.type,a=e.payload;"update"===t&&n.props.update(a)},n.handleBoxCreateDialog=function(e){var t=e.type,a=e.payload;"create"===t&&n.props.create(a),n.setState({creatingBox:!1})},n.state={creatingBox:!1},n}return Object($.a)(a,[{key:"componentWillMount",value:function(){this.handleLoad()}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,n=t.data,o=this.state.creatingBox;return c.a.createElement("div",{className:"container"},c.a.createElement(be,{open:o,onChange:this.handleBoxCreateDialog}),c.a.createElement(le,{style:{paddingTop:10},onSearch:this.handleSearch}),c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement("button",{style:{width:200},type:"button",className:"btn btn-primary",onClick:this.handleAddBox},c.a.createElement("strong",null,"+"))),c.a.createElement(ie,null),a.map((function(t,a){return c.a.createElement(fe,{key:a,model:n[t],onChange:e.handleNoteChange})})))}}]),a}(c.a.Component),ye=Object(s.b)((function(e){return Object(f.a)(Object(f.a)({},e.note),{},{auth:e.auth})}),{load:function(e){var t=e.username,a=B.LOAD;return function(e,n){e(_.UI.showLoading(a)),U.get(x(t)).then((function(t){console.log(t),e({type:a,payload:t}),e(_.UI.hideLoading(a))})).catch((function(t){console.log(t),e(_.UI.showNotification(t.message)),e(_.UI.hideLoading(a))}))}},search:function(e){var t=e.username,a=e.keyword,n=e.category,o=B.SEARCH;return function(e,r){e(_.UI.showLoading(o)),U.post(D(),{username:t,keyword:a,category:n}).then((function(t){console.log(t),e({type:o,payload:t}),e(_.UI.hideLoading(o))})).catch((function(t){console.log(t),e(_.UI.showNotification(t.message)),e(_.UI.hideLoading(o))}))}},create:function(e){var t=B.CREATE;return function(a,n){a(_.UI.showLoading(t));var o=n().auth.owner,r=Object(f.a)(Object(f.a)({},e),{},{username:o});U.post(H(),r).then((function(e){console.log(e),a({type:t,payload:Object(f.a)(Object(f.a)({},r),{},{id:e})}),a(_.UI.hideLoading(t))})).catch((function(e){console.log(e),a(_.UI.showNotification(e.message)),a(_.UI.hideLoading(t))}))}},update:function(e){var t=B.UPDATE;return function(a,n){a(_.UI.showLoading(t)),U.put(H(),e).then((function(n){console.log(n),a({type:t,payload:e}),a(_.UI.hideLoading(t))})).catch((function(e){console.log(e),a(_.UI.showNotification(e.message)),a(_.UI.hideLoading(t))}))}}})(ge),Ee={SUBMIT:"SIGNIN/SUBMIT",CANCEL:"SIGNIN/CANCEL"};var ve,Oe=Object(s.b)((function(e){return Object(f.a)(Object(f.a)({},e.signin),{},{authenticated:e.auth.authenticated})}),{submit:function(e,t){return function(a,n){a(_.UI.showLoading(Ee.SUBMIT)),U.post(S(),{username:e,password:t}).then((function(t){a(_.Auth.authenticated({token:"draft-token",owner:e})),a(_.UI.hideLoading(Ee.SUBMIT))})).catch((function(e){console.log(e),a(_.UI.showNotification(e.message)),a(_.UI.hideLoading(Ee.SUBMIT))}))}},showNotification:_.UI.showNotification})((function(e){var t=Object(r.useState)(""),a=Object(ce.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),i=Object(ce.a)(l,2),s=i[0],u=i[1];return e.authenticated?c.a.createElement(J.a,{to:"/page/notes"}):c.a.createElement("div",{className:"container",style:{maxWidth:500}},c.a.createElement("h1",null,"Sign In"),c.a.createElement("h4",null,"Welcome to note4com!"),c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Email address"),c.a.createElement("input",{type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email",onChange:function(e){o(e.target.value)}}),c.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Password"),c.a.createElement("input",{type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Password",onChange:function(e){u(e.target.value)}})),c.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(t){t.preventDefault(),q(n)&&q(s)?e.submit(n,s):e.showNotification("Please input 'Email' and 'Password'")}},"Submit")))})),Ne=function(e){var t=[d.a];return u.a.apply(void 0,t)(u.d)(M,e||window.__initialState__,window.devToolsExtension?window.devToolsExtension():function(e){return e})}();"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),ve=function(){return c.a.createElement(z.a,{history:g},c.a.createElement(ae,null,c.a.createElement(J.d,null,c.a.createElement(J.b,{path:"/page"},c.a.createElement(re,null,c.a.createElement(J.d,null,c.a.createElement(J.b,{path:"/page/notes",component:ye}),c.a.createElement(J.b,{path:"*",exact:!0},c.a.createElement(J.a,{to:"/page/notes"}))))),c.a.createElement(J.b,{path:"/login",component:Oe}),c.a.createElement(J.b,{path:"*",exact:!0},c.a.createElement(J.a,{to:"/page/notes"})))))},i.a.render(c.a.createElement(s.a,{store:Ne},c.a.createElement(ve,null)),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.91d2c33d.chunk.js.map